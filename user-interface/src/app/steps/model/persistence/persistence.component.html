<app-step-title title="Model - Persistence"></app-step-title>
<form [formGroup]="persistenceForm" class="persistence-form">
  <mat-form-field appearance="fill">
    <mat-label>Storage Type</mat-label>
    <mat-select formControlName="storageType">
      <mat-option *ngFor="let type of storageTypes" [value]="type.value">
        {{type.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field appearance="fill">
    <mat-label>Projections</mat-label>
    <mat-select formControlName="projections" [disabled]="!persistenceForm.get('storageType').value">
      <mat-option *ngFor="let proj of projections" [value]="proj.value">
        {{proj.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <div style="display: flex; justify-content: space-between;">
  <mat-label>Use CQRS?</mat-label>
  <mat-slide-toggle formControlName="useCQRS"></mat-slide-toggle>
  </div>
  <mat-form-field appearance="fill" *ngIf="!persistenceForm.get('useCQRS').value" style="padding-top: 8%;">
    <mat-label>Database</mat-label>
    <mat-select formControlName="database">
      <mat-option *ngFor="let database of databases" [value]="database.value">
        {{database.name}}
      </mat-option>
    </mat-select>  </mat-form-field>
  <mat-form-field appearance="fill" *ngIf="persistenceForm.get('useCQRS').value" style="padding-top: 8%;">
    <mat-label>Command Model Database</mat-label>
    <mat-select formControlName="commandModelDatabase">
      <mat-option *ngFor="let commandModelDatabase of databases" [value]="commandModelDatabase.value">
        {{commandModelDatabase.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field appearance="fill" *ngIf="persistenceForm.get('useCQRS').value">
    <mat-label>Query Model Database</mat-label>
    <mat-select formControlName="queryModelDatabase">
      <mat-option *ngFor="let queryModelDatabase of databases" [value]="queryModelDatabase.value">
        {{queryModelDatabase.name}}
      </mat-option>
    </mat-select>
  </mat-form-field>
</form>
