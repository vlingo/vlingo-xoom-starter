<app-step-title title="Model"></app-step-title>

<div class="row model-settings">
    <app-table #aggregateTable resourceName="Aggregate" [items]="generationSettings.model.aggregates" class="col-md-3" highlightSelected="true"></app-table>
    <app-table #domainEventTable resourceName="Domain Event" [items]="generationSettings.domainEventsOf(selectedAggregateId)" [disableInclusion]="shouldDisableNewDomainEvents()" class="col-md-3"></app-table>

    <div class="col-md-3">
        <div class="card additional-options">
            <div class="card-body">
                <div class="form-group col-md-12">
                    <label class for="restResources">REST Resources:</label>
                    <app-multiple-selection #multipleSelection [settings]="restResourcesSettings"></app-multiple-selection>
                </div>

                <div class="form-row" *ngIf="shouldDisplayCQRS();">
                    <div class="col-md-4 cqrs-label">
                        <label for="useGrid">Use CQRS:</label>
                    </div>
                    <div class="col-md-1 pt-1 ml-1">
                        <input type="checkbox"
                        class="form-check-input"
                        (click)="onCQRSClick($event)"
                        [checked]="generationSettings.model.useCQRS">
                    </div>
                </div>

                <!-- <div class="form-group col-md-12" >
                    <label class for="storageType">Storage Type:</label>
                    <select #storageOption class="form-control" [(ngModel)]="generationSettings.model.storageType" (ngModelChange)="onStorageTypeSelection()">
                        <option *ngFor="let type of storageTypes();" [ngValue]="type.value">{{type.name}}</option>
                    </select>
                </div> -->

                <div class="form-group col-md-12" *ngIf="!generationSettings.model.useCQRS">
                    <label class for="domainModelDatabase">Domain Model Database:</label>
                    <select class="form-control" [(ngModel)]="generationSettings.model.database" [disabled]="generationSettings.model.useCQRS">
                        <option *ngFor="let type of databaseTypes" [ngValue]="type.value">{{type.name}}</option>
                    </select>
                </div>

                <div class="form-group col-md-12" *ngIf="generationSettings.model.useCQRS">
                    <label class for="commandModelDatabase">Command Model Database:</label>
                    <select class="form-control" [(ngModel)]="generationSettings.model.commandModelDatabase">
                        <option *ngFor="let type of databaseTypes" [ngValue]="type.value">{{type.name}}</option>
                    </select>
                </div>

                <div class="form-group col-md-12" *ngIf="generationSettings.model.useCQRS">
                    <label class for="queryModelDatabase">Query Model Database:</label>
                    <select class="form-control" [(ngModel)]="generationSettings.model.queryModelDatabase">
                        <option *ngFor="let type of databaseTypes" [ngValue]="type.value">{{type.name}}</option>
                    </select>
                </div>

                <!-- <div class="form-group col-md-12" *ngIf="generationSettings.model.useCQRS">
                    <label class for="projection">Projections:</label>
                    <select class="form-control" [(ngModel)]="generationSettings.model.projections">
                        <option *ngFor="let option of projectionOptions();" [ngValue]="option.value">{{option.name}}</option>
                    </select>
                </div> -->
            </div>
        </div>
    </div>
</div>
